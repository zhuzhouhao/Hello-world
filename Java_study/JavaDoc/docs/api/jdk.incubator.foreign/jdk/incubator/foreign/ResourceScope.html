<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (18) -->
<title>ResourceScope (Java SE 18 &amp; JDK 18)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: jdk.incubator.foreign, package: jdk.incubator.foreign, interface: ResourceScope">
<meta name="generator" content="javadoc/ClassWriterImpl">
<meta name="keywords" content="jdk.incubator.foreign.ResourceScope interface">
<meta name="keywords" content="isAlive()">
<meta name="keywords" content="ownerThread()">
<meta name="keywords" content="close()">
<meta name="keywords" content="addCloseAction()">
<meta name="keywords" content="keepAlive()">
<meta name="keywords" content="newConfinedScope()">
<meta name="keywords" content="newSharedScope()">
<meta name="keywords" content="newImplicitScope()">
<meta name="keywords" content="globalScope()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><div style="margin-top: 14px;"><strong>Java SE 18 &amp; JDK 18</strong> </div></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ResourceScope.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../preview-list.html">Preview</a></li>
<li><a href="../../../../new-list.html">New</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../module-summary.html">jdk.incubator.foreign</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">jdk.incubator.foreign</a></div>
<h1 title="Interface ResourceScope" class="title">Interface ResourceScope</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="../../../../java.base/java/lang/AutoCloseable.html" title="interface in java.lang">AutoCloseable</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public sealed interface </span><span class="element-name type-name-label">ResourceScope</span><span class="extends-implements">
extends <a href="../../../../java.base/java/lang/AutoCloseable.html" title="interface in java.lang">AutoCloseable</a></span></div>
<div class="block">A resource scope manages the lifecycle of one or more resources. Resources (e.g. <a href="MemorySegment.html" title="interface in jdk.incubator.foreign"><code>MemorySegment</code></a>) associated
 with a resource scope can only be accessed while the resource scope is <a href="#isAlive()">alive</a>,
 and by the <a href="#ownerThread()">thread</a> associated with the resource scope (if any).

 <h2>Deterministic deallocation</h2>

 Resource scopes support <em>deterministic deallocation</em>; that is, they can be <a href="#close()">closed</a>
 explicitly. When a resource scope is closed, it is no longer <a href="#isAlive()"><code>alive</code></a>, and subsequent
 operations on resources associated with that scope (e.g. attempting to access a <a href="MemorySegment.html" title="interface in jdk.incubator.foreign"><code>MemorySegment</code></a> instance)
 will fail with <a href="../../../../java.base/java/lang/IllegalStateException.html" title="class in java.lang"><code>IllegalStateException</code></a>.
 <p>
 Closing a resource scope will cause all the <a href="#addCloseAction(java.lang.Runnable)">close actions</a> associated with that scope to be called.
 Moreover, closing a resource scope might trigger the releasing of the underlying memory resources associated with said scope; for instance:
 <ul>
     <li>closing the scope associated with a <a href="MemorySegment.html#allocateNative(long,long,jdk.incubator.foreign.ResourceScope)">native memory segment</a>
     results in <em>freeing</em> the native memory associated with it;</li>
     <li>closing the scope associated with a <a href="MemorySegment.html#mapFile(java.nio.file.Path,long,long,java.nio.channels.FileChannel.MapMode,jdk.incubator.foreign.ResourceScope)">mapped memory segment</a>
     results in the backing memory-mapped file to be unmapped;</li>
     <li>closing the scope associated with an <a href="CLinker.html#upcallStub(java.lang.invoke.MethodHandle,jdk.incubator.foreign.FunctionDescriptor,jdk.incubator.foreign.ResourceScope)">upcall stub</a>
     results in releasing the stub;</li>
     <li>closing the scope associated with a <a href="VaList.html" title="interface in jdk.incubator.foreign">variable arity list</a> results in releasing the memory
     associated with that variable arity list instance.</li>
 </ul>

 <h2>Implicit deallocation</h2>

 Resource scopes can be associated with a <a href="../../../../java.base/java/lang/ref/Cleaner.html" title="class in java.lang.ref"><code>Cleaner</code></a> instance, so that they are also closed automatically,
 once the scope instance becomes <a href="../../../java/lang/ref/package.html#reachability">unreachable</a>.
 This can be useful to allow for predictable, deterministic resource deallocation, while still preventing accidental
 native memory leaks. In case a managed resource scope is closed explicitly, no further action will be taken when
 the scope becomes unreachable; that is, <a href="#addCloseAction(java.lang.Runnable)">close actions</a> associated with a
 resource scope, whether managed or not, are called <em>exactly once</em>.

 <h2><a id="global-scope">Global scope</a></h2>

 An important implicit resource scope is the so called <a href="#globalScope()">global scope</a>; the global scope is
 a resource scope that cannot be closed, either explicitly or implicitly. As a result, the global scope will never
 attempt to release resources associated with it. Examples of resources associated with the global scope are:
 <ul>
     <li>heap segments created from <a href="MemorySegment.html#ofArray(int%5B%5D)">arrays</a> or
     <a href="MemorySegment.html#ofByteBuffer(java.nio.ByteBuffer)">buffers</a>;</li>
     <li>variable arity lists <a href="VaList.html#ofAddress(jdk.incubator.foreign.MemoryAddress,jdk.incubator.foreign.ResourceScope)">obtained</a> from raw memory addresses;
     <li>native symbols <a href="SymbolLookup.html#lookup(java.lang.String)">obtained</a> from a <a href="SymbolLookup.html#loaderLookup()">loader lookup</a>,
     or from the <a href="CLinker.html" title="interface in jdk.incubator.foreign"><code>CLinker</code></a>.</li>
 </ul>
 In other words, the global scope is used to indicate that the lifecycle of one or more resources must, where
 needed, be managed independently by clients.

 <h2><a id="thread-confinement">Thread confinement</a></h2>

 Resource scopes can be divided into two categories: <em>thread-confined</em> resource scopes, and <em>shared</em>
 resource scopes.
 <p>
 <a href="#newConfinedScope()">Confined resource scopes</a>, support strong thread-confinement guarantees. Upon creation,
 they are assigned an <a href="#ownerThread()">owner thread</a>, typically the thread which initiated the creation operation.
 After creating a confined resource scope, only the owner thread will be allowed to directly manipulate the resources
 associated with this resource scope. Any attempt to perform resource access from a thread other than the
 owner thread will result in a runtime failure.
 <p>
 <a href="#newSharedScope()">Shared resource scopes</a>, on the other hand, have no owner thread;
 as such, resources associated with shared resource scopes can be accessed by multiple threads.
 This might be useful when multiple threads need to access the same resource concurrently (e.g. in the case of parallel processing).
 For instance, a client might obtain a <a href="../../../../java.base/java/util/Spliterator.html" title="interface in java.util"><code>Spliterator</code></a> from a segment backed by a shared scope, which can then be used to slice the
 segment and allow multiple threads to work in parallel on disjoint segment slices. The following code can be used to sum
 all int values in a memory segment in parallel:

 
<div class="snippet-container"><button class="snippet-copy" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy"></button>
<pre class="snippet"><code class="language-java">try (ResourceScope scope = ResourceScope.newSharedScope()) {
    SequenceLayout SEQUENCE_LAYOUT = MemoryLayout.sequenceLayout(1024, ValueLayout.JAVA_INT);
    MemorySegment segment = MemorySegment.allocateNative(SEQUENCE_LAYOUT, scope);
    int sum = segment.elements(ValueLayout.JAVA_INT).parallel()
                     .mapToInt(s -&gt; s.get(ValueLayout.JAVA_INT, 0))
                     .sum();
}
</code></pre>
</div>


 <p>
 Shared resource scopes, while powerful, must be used with caution: if one or more threads accesses
 a resource associated with a shared scope while the scope is being closed from another thread, an exception might occur on both
 the accessing and the closing threads. Clients should refrain from attempting to close a shared resource scope repeatedly
 (e.g. keep calling <a href="#close()"><code>close()</code></a> until no exception is thrown). Instead, clients of shared resource scopes
 should always ensure that proper synchronization mechanisms (e.g. using temporal dependencies, see below) are put in place
 so that threads closing shared resource scopes can never race against threads accessing resources managed by same scopes.

 <h2>Temporal dependencies</h2>

 Resource scopes can depend on each other. More specifically, a scope can feature
 <a href="#keepAlive(jdk.incubator.foreign.ResourceScope)">temporal dependencies</a> on one or more other resource scopes.
 Such a resource scope cannot be closed (either implicitly or explicitly) until <em>all</em> the scopes it depends on
 have also been closed.
 <p>
 This can be useful when clients need to perform a critical operation on a memory segment, during which they have
 to ensure that the scope associated with that segment will not be closed; this can be done as follows:

 
<div class="snippet-container"><button class="snippet-copy" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy"></button>
<pre class="snippet"><code class="language-java">MemorySegment segment = ...
try (ResourceScope criticalScope = ResourceScope.newConfinedScope()) {
    criticalScope.keepAlive(segment.scope());
    &lt;critical operation on segment&gt;
}
</code></pre>
</div>


 Note that a resource scope does not become <a href="../../../java/lang/ref/package.html#reachability">unreachable</a>
 until all the scopes it depends on have been closed.</div>
<dl class="notes">
<dt>Implementation Requirements:</dt>
<dd>Implementations of this interface are immutable, thread-safe and <a href="../../../../java.base/java/lang/doc-files/ValueBased.html">value-based</a>.</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#addCloseAction(java.lang.Runnable)" class="member-name-link">addCloseAction</a><wbr>(<a href="../../../../java.base/java/lang/Runnable.html" title="interface in java.lang">Runnable</a>&nbsp;runnable)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Add a custom cleanup action which will be executed when the resource scope is closed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#close()" class="member-name-link">close</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Closes this resource scope.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static <a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#globalScope()" class="member-name-link">globalScope</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Returns the <a href="ResourceScope.html#global-scope"><em>global scope</em></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isAlive()" class="member-name-link">isAlive</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns <code>true</code>, if this resource scope is alive.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#keepAlive(jdk.incubator.foreign.ResourceScope)" class="member-name-link">keepAlive</a><wbr>(<a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a>&nbsp;target)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Creates a temporal dependency between this scope and the target scope.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static <a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#newConfinedScope()" class="member-name-link">newConfinedScope</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Creates a new confined scope.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static <a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#newConfinedScope(java.lang.ref.Cleaner)" class="member-name-link">newConfinedScope</a><wbr>(<a href="../../../../java.base/java/lang/ref/Cleaner.html" title="class in java.lang.ref">Cleaner</a>&nbsp;cleaner)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Creates a new confined scope, managed by the provided cleaner instance.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static <a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#newImplicitScope()" class="member-name-link">newImplicitScope</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Creates a new shared scope, managed by a private <a href="../../../../java.base/java/lang/ref/Cleaner.html" title="class in java.lang.ref"><code>Cleaner</code></a> instance.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static <a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#newSharedScope()" class="member-name-link">newSharedScope</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Creates a new shared scope.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static <a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#newSharedScope(java.lang.ref.Cleaner)" class="member-name-link">newSharedScope</a><wbr>(<a href="../../../../java.base/java/lang/ref/Cleaner.html" title="class in java.lang.ref">Cleaner</a>&nbsp;cleaner)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Creates a new shared scope, managed by the provided cleaner instance.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="../../../../java.base/java/lang/Thread.html" title="class in java.lang">Thread</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#ownerThread()" class="member-name-link">ownerThread</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">The thread owning this resource scope.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="isAlive()">
<h3>isAlive</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">isAlive</span>()</div>
<div class="block">Returns <code>true</code>, if this resource scope is alive.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code>, if this resource scope is alive</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#close()"><code>close()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="ownerThread()">
<h3>ownerThread</h3>
<div class="member-signature"><span class="return-type"><a href="../../../../java.base/java/lang/Thread.html" title="class in java.lang">Thread</a></span>&nbsp;<span class="element-name">ownerThread</span>()</div>
<div class="block">The thread owning this resource scope.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the thread owning this resource scope, or <code>null</code> if this resource scope is shared.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">close</span>()</div>
<div class="block">Closes this resource scope. As a side effect, if this operation completes without exceptions, this scope will be marked
 as <em>not alive</em>, and subsequent operations on resources associated with this scope will fail with <a href="../../../../java.base/java/lang/IllegalStateException.html" title="class in java.lang"><code>IllegalStateException</code></a>.
 Additionally, upon successful closure, all native resources associated with this resource scope will be released.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../../../java.base/java/lang/AutoCloseable.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../java.base/java/lang/AutoCloseable.html" title="interface in java.lang">AutoCloseable</a></code></dd>
<dt>API Note:</dt>
<dd>This operation is not idempotent; that is, closing an already closed resource scope <em>always</em> results in an
 exception being thrown. This reflects a deliberate design choice: resource scope state transitions should be
 manifest in the client code; a failure in any of these transitions reveals a bug in the underlying application
 logic.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../java.base/java/lang/IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if one of the following condition is met:
 <ul>
     <li>this resource scope is not <em>alive</em>
     <li>this resource scope is confined, and this method is called from a thread other than the thread owning this resource scope</li>
     <li>this resource scope is shared and a resource associated with this scope is accessed while this method is called</li>
     <li>one or more scopes which <a href="#keepAlive(jdk.incubator.foreign.ResourceScope)">depend</a> on this resource scope have not been closed.
 </ul></dd>
<dd><code><a href="../../../../java.base/java/lang/UnsupportedOperationException.html" title="class in java.lang">UnsupportedOperationException</a></code> - if this resource scope is the <a href="#globalScope()">global scope</a>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addCloseAction(java.lang.Runnable)">
<h3>addCloseAction</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">addCloseAction</span><wbr><span class="parameters">(<a href="../../../../java.base/java/lang/Runnable.html" title="interface in java.lang">Runnable</a>&nbsp;runnable)</span></div>
<div class="block">Add a custom cleanup action which will be executed when the resource scope is closed.
 The order in which custom cleanup actions are invoked once the scope is closed is unspecified.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>runnable</code> - the custom cleanup action to be associated with this scope.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../java.base/java/lang/IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if this scope has been closed, or if access occurs from
 a thread other than the thread owning this scope.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="keepAlive(jdk.incubator.foreign.ResourceScope)">
<h3>keepAlive</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">keepAlive</span><wbr><span class="parameters">(<a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a>&nbsp;target)</span></div>
<div class="block">Creates a temporal dependency between this scope and the target scope. As a result, the target scope cannot
 be <a href="#close()">closed</a> <em>before</em> this scope.</div>
<dl class="notes">
<dt>Implementation Note:</dt>
<dd>A given scope can support up to <a href="../../../../java.base/java/lang/Integer.html#MAX_VALUE"><code>Integer.MAX_VALUE</code></a> pending keep alive requests.</dd>
<dt>Parameters:</dt>
<dd><code>target</code> - the scope that needs to be kept alive.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../java.base/java/lang/IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if <code>target == this</code>.</dd>
<dd><code><a href="../../../../java.base/java/lang/IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if this scope or <code>target</code> have been closed, or if access occurs from
 a thread other than the thread owning this scope or <code>target</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newConfinedScope()">
<h3>newConfinedScope</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a></span>&nbsp;<span class="element-name">newConfinedScope</span>()</div>
<div class="block">Creates a new confined scope.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a new confined scope.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newConfinedScope(java.lang.ref.Cleaner)">
<h3>newConfinedScope</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a></span>&nbsp;<span class="element-name">newConfinedScope</span><wbr><span class="parameters">(<a href="../../../../java.base/java/lang/ref/Cleaner.html" title="class in java.lang.ref">Cleaner</a>&nbsp;cleaner)</span></div>
<div class="block">Creates a new confined scope, managed by the provided cleaner instance.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>cleaner</code> - the cleaner to be associated with the returned scope.</dd>
<dt>Returns:</dt>
<dd>a new confined scope, managed by <code>cleaner</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newSharedScope()">
<h3>newSharedScope</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a></span>&nbsp;<span class="element-name">newSharedScope</span>()</div>
<div class="block">Creates a new shared scope.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a new shared scope.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newSharedScope(java.lang.ref.Cleaner)">
<h3>newSharedScope</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a></span>&nbsp;<span class="element-name">newSharedScope</span><wbr><span class="parameters">(<a href="../../../../java.base/java/lang/ref/Cleaner.html" title="class in java.lang.ref">Cleaner</a>&nbsp;cleaner)</span></div>
<div class="block">Creates a new shared scope, managed by the provided cleaner instance.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>cleaner</code> - the cleaner to be associated with the returned scope.</dd>
<dt>Returns:</dt>
<dd>a new shared scope, managed by <code>cleaner</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newImplicitScope()">
<h3>newImplicitScope</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a></span>&nbsp;<span class="element-name">newImplicitScope</span>()</div>
<div class="block">Creates a new shared scope, managed by a private <a href="../../../../java.base/java/lang/ref/Cleaner.html" title="class in java.lang.ref"><code>Cleaner</code></a> instance. Equivalent to (but likely more efficient than)
 the following code:
 
<div class="snippet-container"><button class="snippet-copy" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy"></button>
<pre class="snippet"><code class="language-java">newSharedScope(Cleaner.create());
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a shared scope, managed by a private <a href="../../../../java.base/java/lang/ref/Cleaner.html" title="class in java.lang.ref"><code>Cleaner</code></a> instance.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="globalScope()">
<h3>globalScope</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a></span>&nbsp;<span class="element-name">globalScope</span>()</div>
<div class="block">Returns the <a href="ResourceScope.html#global-scope"><em>global scope</em></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the <a href="ResourceScope.html#global-scope"><em>global scope</em></a>.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><a href="https://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase18&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples. <a href="https://docs.oracle.com/en/java/javase/index.html">Other versions.</a><br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2022, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java18speclicense.html">license terms</a> and the <a href="https://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <!-- Version 18.0.2+9-61 --></small></p>
</footer>
</div>
</div>
</body>
</html>
