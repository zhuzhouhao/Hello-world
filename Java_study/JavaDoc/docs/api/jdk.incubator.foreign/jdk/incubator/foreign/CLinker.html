<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (18) -->
<title>CLinker (Java SE 18 &amp; JDK 18)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: jdk.incubator.foreign, package: jdk.incubator.foreign, interface: CLinker">
<meta name="generator" content="javadoc/ClassWriterImpl">
<meta name="keywords" content="jdk.incubator.foreign.CLinker interface">
<meta name="keywords" content="systemCLinker()">
<meta name="keywords" content="lookup()">
<meta name="keywords" content="downcallHandle()">
<meta name="keywords" content="upcallStub()">
<meta name="keywords" content="downcallType()">
<meta name="keywords" content="upcallType()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><div style="margin-top: 14px;"><strong>Java SE 18 &amp; JDK 18</strong> </div></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/CLinker.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../preview-list.html">Preview</a></li>
<li><a href="../../../../new-list.html">New</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../module-summary.html">jdk.incubator.foreign</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">jdk.incubator.foreign</a></div>
<h1 title="Interface CLinker" class="title">Interface CLinker</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="SymbolLookup.html" title="interface in jdk.incubator.foreign">SymbolLookup</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public sealed interface </span><span class="element-name type-name-label">CLinker</span><span class="extends-implements">
extends <a href="SymbolLookup.html" title="interface in jdk.incubator.foreign">SymbolLookup</a></span></div>
<div class="block">A C linker implements the C Application Binary Interface (ABI) calling conventions.
 Instances of this interface can be used to link foreign functions in native libraries that
 follow the JVM's target platform C ABI. A C linker provides two main capabilities: first, it allows Java code
 to <em>link</em> foreign functions into a so called <em>downcall method handle</em>; secondly, it allows
 native code to call Java method handles via the generation of <em>upcall stubs</em>.
 <p>
 On unsupported platforms this class will fail to initialize with an <a href="../../../../java.base/java/lang/ExceptionInInitializerError.html" title="class in java.lang"><code>ExceptionInInitializerError</code></a>.
 <p>
 Unless otherwise specified, passing a <code>null</code> argument, or an array argument containing one or more <code>null</code>
 elements to a method in this class causes a <a href="../../../../java.base/java/lang/NullPointerException.html" title="class in java.lang"><code>NullPointerException</code></a> to be thrown. </p>

 <h2><a id="downcall-method-handles">Downcall method handles</a></h2>
 <p>
 <a href="#downcallHandle(jdk.incubator.foreign.FunctionDescriptor)">Linking a foreign function</a> is a process which requires a function descriptor,
 a set of memory layouts which, together, specify the signature of the foreign function to be linked, and returns,
 when complete, a downcall method handle, that is, a method handle that can be used to invoke the target native function.
 The Java <a href="../../../../java.base/java/lang/invoke/MethodType.html" title="class in java.lang.invoke">method type</a> associated with the returned method handle is
 <a href="#downcallType(jdk.incubator.foreign.FunctionDescriptor)">derived</a> from the argument and return layouts in the function descriptor.
 More specifically, given each layout <code>L</code> in the function descriptor, a corresponding carrier <code>C</code> is inferred,
 as described below:
 <ul>
 <li>if <code>L</code> is a <a href="ValueLayout.html" title="class in jdk.incubator.foreign"><code>ValueLayout</code></a> with carrier <code>E</code> then there are two cases:
     <ul>
         <li>if <code>L</code> occurs in a parameter position and <code>E</code> is <code>MemoryAddress.class</code>,
         then <code>C = Addressable.class</code>;</li>
         <li>otherwise, <code>C = E</code>;
     </ul></li>
 <li>or, if <code>L</code> is a <a href="GroupLayout.html" title="class in jdk.incubator.foreign"><code>GroupLayout</code></a>, then <code>C</code> is set to <code>MemorySegment.class</code></li>
 </ul>
 <p>
 The downcall method handle type, derived as above, might be decorated by additional leading parameters,
 in the given order if both are present:
 <ul>
 <li>If the downcall method handle is created <a href="#downcallHandle(jdk.incubator.foreign.FunctionDescriptor)">without specifying a native symbol</a>,
 the downcall method handle type features a leading parameter of type <a href="NativeSymbol.html" title="interface in jdk.incubator.foreign"><code>NativeSymbol</code></a>, from which the
 address of the target native function can be derived.</li>
 <li>If the function descriptor's return layout is a group layout, the resulting downcall method handle accepts
 an additional leading parameter of type <a href="SegmentAllocator.html" title="interface in jdk.incubator.foreign"><code>SegmentAllocator</code></a>, which is used by the linker runtime to allocate the
 memory region associated with the struct returned by the downcall method handle.</li>
 </ul>
 <p>Variadic functions, declared in C either with a trailing ellipses (<code>...</code>) at the end of the formal parameter
 list or with an empty formal parameter list, are not supported directly. However, it is possible to link a native
 variadic function by using a <a href="FunctionDescriptor.html#asVariadic(jdk.incubator.foreign.MemoryLayout...)"><em>variadic</em></a> function descriptor,
 in which the specialized signature of a given variable arity callsite is described in full. Alternatively,
 if the foreign library allows it, clients might also be able to interact with variable arity methods
 by passing a trailing parameter of type <a href="VaList.html" title="interface in jdk.incubator.foreign"><code>VaList</code></a>.

 <h2><a id="upcall-stubs">Upcall stubs</a></h2>

 <a href="#upcallStub(java.lang.invoke.MethodHandle,jdk.incubator.foreign.FunctionDescriptor,jdk.incubator.foreign.ResourceScope)">Creating an upcall stub</a> requires a method
 handle and a function descriptor; in this case, the set of memory layouts in the function descriptor
 specify the signature of the function pointer associated with the upcall stub.
 <p>
 The type of the provided method handle has to match the Java <a href="../../../../java.base/java/lang/invoke/MethodType.html" title="class in java.lang.invoke">method type</a>
 associated with the upcall stub, which is derived from the argument and return layouts in the function descriptor.
 More specifically, given each layout <code>L</code> in the function descriptor, a corresponding carrier <code>C</code> is inferred, as described below:
 <ul>
 <li>if <code>L</code> is a <a href="ValueLayout.html" title="class in jdk.incubator.foreign"><code>ValueLayout</code></a> with carrier <code>E</code> then there are two cases:
     <ul>
         <li>if <code>L</code> occurs in a return position and <code>E</code> is <code>MemoryAddress.class</code>,
         then <code>C = Addressable.class</code>;</li>
         <li>otherwise, <code>C = E</code>;
     </ul></li>
 <li>or, if <code>L</code> is a <a href="GroupLayout.html" title="class in jdk.incubator.foreign"><code>GroupLayout</code></a>, then <code>C</code> is set to <code>MemorySegment.class</code></li>
 </ul>
 Upcall stubs are modelled by instances of type <a href="NativeSymbol.html" title="interface in jdk.incubator.foreign"><code>NativeSymbol</code></a>; upcall stubs can be passed by reference to other
 downcall method handles (as <a href="NativeSymbol.html" title="interface in jdk.incubator.foreign"><code>NativeSymbol</code></a> implements the <a href="Addressable.html" title="interface in jdk.incubator.foreign"><code>Addressable</code></a> interface) and,
 when no longer required, they can be <a href="ResourceScope.html#close()"><code>released</code></a>, via their <a href="NativeSymbol.html#scope()">scope</a>.

 <h2>System lookup</h2>

 This class implements the <a href="SymbolLookup.html" title="interface in jdk.incubator.foreign"><code>SymbolLookup</code></a> interface; as such clients can <a href="#lookup(java.lang.String)">look up</a> symbols
 in the standard libraries associated with this linker. The set of symbols available for lookup is unspecified,
 as it depends on the platform and on the operating system.

 <h2>Safety considerations</h2>

 Obtaining downcall method handle is intrinsically unsafe. A symbol in a native library does not, in general,
 contain enough signature information (e.g. arity and types of native function parameters). As a consequence,
 the linker runtime cannot validate linkage requests. When a client interacts with a downcall method handle obtained
 through an invalid linkage request (e.g. by specifying a function descriptor featuring too many argument layouts),
 the result of such interaction is unspecified and can lead to JVM crashes. On downcall handle invocation,
 the linker runtime guarantees the following for any argument that is a memory resource <code>R</code> (of type <a href="MemorySegment.html" title="interface in jdk.incubator.foreign"><code>MemorySegment</code></a>,
 <a href="NativeSymbol.html" title="interface in jdk.incubator.foreign"><code>NativeSymbol</code></a> or <a href="VaList.html" title="interface in jdk.incubator.foreign"><code>VaList</code></a>):
 <ul>
     <li>The resource scope of <code>R</code> is <a href="ResourceScope.html#isAlive()">alive</a>. Otherwise, the invocation throws
     <a href="../../../../java.base/java/lang/IllegalStateException.html" title="class in java.lang"><code>IllegalStateException</code></a>;</li>
     <li>The invocation occurs in same thread as the one <a href="ResourceScope.html#ownerThread()"><code>owning</code></a> the resource scope of <code>R</code>,
     if said scope is confined. Otherwise, the invocation throws <a href="../../../../java.base/java/lang/IllegalStateException.html" title="class in java.lang"><code>IllegalStateException</code></a>; and</li>
     <li>The scope of <code>R</code> is <a href="ResourceScope.html#keepAlive(jdk.incubator.foreign.ResourceScope)">kept alive</a> (and cannot be closed) during the invocation.
</ul>
 <p>
 When creating upcall stubs the linker runtime validates the type of the target method handle against the provided
 function descriptor and report an error if any mismatch is detected. As for downcalls, JVM crashes might occur,
 if the native code casts the function pointer associated with an upcall stub to a type
 that is incompatible with the provided function descriptor. Moreover, if the target method
 handle associated with an upcall stub returns a <a href="MemoryAddress.html" title="interface in jdk.incubator.foreign">native address</a>, clients must ensure
 that this address cannot become invalid after the upcall completes. This can lead to unspecified behavior,
 and even JVM crashes, since an upcall is typically executed in the context of a downcall method handle invocation.</div>
<dl class="notes">
<dt>Implementation Requirements:</dt>
<dd>Implementations of this interface are immutable, thread-safe and <a href="../../../../java.base/java/lang/doc-files/ValueBased.html">value-based</a>.</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab5" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab5', 3)" class="table-tab">Default Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="../../../../java.base/java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#downcallHandle(jdk.incubator.foreign.FunctionDescriptor)" class="member-name-link">downcallHandle</a><wbr>(<a href="FunctionDescriptor.html" title="class in jdk.incubator.foreign">FunctionDescriptor</a>&nbsp;function)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Obtains a foreign method handle, with the given type and featuring the given function descriptor, which can be
 used to call a target foreign function at the address in a dynamically provided native symbol.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="../../../../java.base/java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#downcallHandle(jdk.incubator.foreign.NativeSymbol,jdk.incubator.foreign.FunctionDescriptor)" class="member-name-link">downcallHandle</a><wbr>(<a href="NativeSymbol.html" title="interface in jdk.incubator.foreign">NativeSymbol</a>&nbsp;symbol,
 <a href="FunctionDescriptor.html" title="class in jdk.incubator.foreign">FunctionDescriptor</a>&nbsp;function)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Obtains a foreign method handle, with the given type and featuring the given function descriptor,
 which can be used to call a target foreign function at the address in the given native symbol.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static <a href="../../../../java.base/java/lang/invoke/MethodType.html" title="class in java.lang.invoke">MethodType</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#downcallType(jdk.incubator.foreign.FunctionDescriptor)" class="member-name-link">downcallType</a><wbr>(<a href="FunctionDescriptor.html" title="class in jdk.incubator.foreign">FunctionDescriptor</a>&nbsp;functionDescriptor)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Obtains the downcall method handle <a href="../../../../java.base/java/lang/invoke/MethodType.html" title="class in java.lang.invoke">type</a> associated with a given function descriptor.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="../../../../java.base/java/util/Optional.html" title="class in java.util">Optional</a>&lt;<a href="NativeSymbol.html" title="interface in jdk.incubator.foreign">NativeSymbol</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#lookup(java.lang.String)" class="member-name-link">lookup</a><wbr>(<a href="../../../../java.base/java/lang/String.html" title="class in java.lang">String</a>&nbsp;name)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Look up a symbol in the standard libraries associated with this linker.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static <a href="CLinker.html" title="interface in jdk.incubator.foreign">CLinker</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#systemCLinker()" class="member-name-link">systemCLinker</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Returns the C linker for the current platform.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="NativeSymbol.html" title="interface in jdk.incubator.foreign">NativeSymbol</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#upcallStub(java.lang.invoke.MethodHandle,jdk.incubator.foreign.FunctionDescriptor,jdk.incubator.foreign.ResourceScope)" class="member-name-link">upcallStub</a><wbr>(<a href="../../../../java.base/java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a>&nbsp;target,
 <a href="FunctionDescriptor.html" title="class in jdk.incubator.foreign">FunctionDescriptor</a>&nbsp;function,
 <a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a>&nbsp;scope)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Allocates a native stub with given scope which can be passed to other foreign functions (as a function pointer);
 calling such a function pointer from native code will result in the execution of the provided method handle.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static <a href="../../../../java.base/java/lang/invoke/MethodType.html" title="class in java.lang.invoke">MethodType</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#upcallType(jdk.incubator.foreign.FunctionDescriptor)" class="member-name-link">upcallType</a><wbr>(<a href="FunctionDescriptor.html" title="class in jdk.incubator.foreign">FunctionDescriptor</a>&nbsp;functionDescriptor)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Obtains the method handle <a href="../../../../java.base/java/lang/invoke/MethodType.html" title="class in java.lang.invoke">type</a> associated with an upcall stub with given function descriptor.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="systemCLinker()">
<h3>systemCLinker</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="CLinker.html" title="interface in jdk.incubator.foreign">CLinker</a></span>&nbsp;<span class="element-name">systemCLinker</span>()</div>
<div class="block">Returns the C linker for the current platform.
 <p>
 This method is <a href="package-summary.html#restricted"><em>restricted</em></a>.
 Restricted methods are unsafe, and, if used incorrectly, their use might crash
 the JVM or, worse, silently result in memory corruption. Thus, clients should refrain from depending on
 restricted methods, and use safe and supported functionalities, where possible.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a linker for this system.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../java.base/java/lang/IllegalCallerException.html" title="class in java.lang">IllegalCallerException</a></code> - if access to this method occurs from a module <code>M</code> and the command line option
 <code>--enable-native-access</code> is either absent, or does not mention the module name <code>M</code>, or
 <code>ALL-UNNAMED</code> in case <code>M</code> is an unnamed module.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="lookup(java.lang.String)">
<h3>lookup</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="../../../../java.base/java/util/Optional.html" title="class in java.util">Optional</a>&lt;<a href="NativeSymbol.html" title="interface in jdk.incubator.foreign">NativeSymbol</a>&gt;</span>&nbsp;<span class="element-name">lookup</span><wbr><span class="parameters">(<a href="../../../../java.base/java/lang/String.html" title="class in java.lang">String</a>&nbsp;name)</span></div>
<div class="block">Look up a symbol in the standard libraries associated with this linker.
 The set of symbols available for lookup is unspecified, as it depends on the platform and on the operating system.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="SymbolLookup.html#lookup(java.lang.String)">lookup</a></code>&nbsp;in interface&nbsp;<code><a href="SymbolLookup.html" title="interface in jdk.incubator.foreign">SymbolLookup</a></code></dd>
<dt>Parameters:</dt>
<dd><code>name</code> - the symbol name.</dd>
<dt>Returns:</dt>
<dd>a symbol in the standard libraries associated with this linker.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="downcallHandle(jdk.incubator.foreign.NativeSymbol,jdk.incubator.foreign.FunctionDescriptor)">
<h3>downcallHandle</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="../../../../java.base/java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a></span>&nbsp;<span class="element-name">downcallHandle</span><wbr><span class="parameters">(<a href="NativeSymbol.html" title="interface in jdk.incubator.foreign">NativeSymbol</a>&nbsp;symbol,
 <a href="FunctionDescriptor.html" title="class in jdk.incubator.foreign">FunctionDescriptor</a>&nbsp;function)</span></div>
<div class="block">Obtains a foreign method handle, with the given type and featuring the given function descriptor,
 which can be used to call a target foreign function at the address in the given native symbol.
 <p>
 If the provided method type's return type is <code>MemorySegment</code>, then the resulting method handle features
 an additional prefix parameter, of type <a href="SegmentAllocator.html" title="interface in jdk.incubator.foreign"><code>SegmentAllocator</code></a>, which will be used by the linker runtime
 to allocate structs returned by-value.
 <p>
 Calling this method is equivalent to the following code:
 
<div class="snippet-container"><button class="snippet-copy" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy"></button>
<pre class="snippet"><code class="language-java">linker.downcallHandle(function).bindTo(symbol);
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>symbol</code> - downcall symbol.</dd>
<dd><code>function</code> - the function descriptor.</dd>
<dt>Returns:</dt>
<dd>the downcall method handle. The method handle type is <a href="CLinker.html#downcall-method-handles"><em>inferred</em></a></dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../java.base/java/lang/IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if the provided descriptor contains either a sequence or a padding layout,
 or if the symbol is <a href="MemoryAddress.html#NULL"><code>MemoryAddress.NULL</code></a></dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="SymbolLookup.html" title="interface in jdk.incubator.foreign"><code>SymbolLookup</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="downcallHandle(jdk.incubator.foreign.FunctionDescriptor)">
<h3>downcallHandle</h3>
<div class="member-signature"><span class="return-type"><a href="../../../../java.base/java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a></span>&nbsp;<span class="element-name">downcallHandle</span><wbr><span class="parameters">(<a href="FunctionDescriptor.html" title="class in jdk.incubator.foreign">FunctionDescriptor</a>&nbsp;function)</span></div>
<div class="block">Obtains a foreign method handle, with the given type and featuring the given function descriptor, which can be
 used to call a target foreign function at the address in a dynamically provided native symbol.
 The resulting method handle features a prefix parameter (as the first parameter) corresponding to the foreign function
 entry point, of type <a href="NativeSymbol.html" title="interface in jdk.incubator.foreign"><code>NativeSymbol</code></a>.
 <p>
 If the provided function descriptor's return layout is a <a href="GroupLayout.html" title="class in jdk.incubator.foreign"><code>GroupLayout</code></a>, then the resulting method handle features an
 additional prefix parameter (inserted immediately after the address parameter), of type <a href="SegmentAllocator.html" title="interface in jdk.incubator.foreign"><code>SegmentAllocator</code></a>),
 which will be used by the linker runtime to allocate structs returned by-value.
 <p>
 The returned method handle will throw an <a href="../../../../java.base/java/lang/IllegalArgumentException.html" title="class in java.lang"><code>IllegalArgumentException</code></a> if the native symbol passed to it is
 associated with the <a href="MemoryAddress.html#NULL"><code>MemoryAddress.NULL</code></a> address, or a <a href="../../../../java.base/java/lang/NullPointerException.html" title="class in java.lang"><code>NullPointerException</code></a> if the native symbol is <code>null</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>function</code> - the function descriptor.</dd>
<dt>Returns:</dt>
<dd>the downcall method handle. The method handle type is <a href="CLinker.html#downcall-method-handles"><em>inferred</em></a>
 from the provided function descriptor.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../java.base/java/lang/IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if the provided descriptor contains either a sequence or a padding layout.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="SymbolLookup.html" title="interface in jdk.incubator.foreign"><code>SymbolLookup</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="upcallStub(java.lang.invoke.MethodHandle,jdk.incubator.foreign.FunctionDescriptor,jdk.incubator.foreign.ResourceScope)">
<h3>upcallStub</h3>
<div class="member-signature"><span class="return-type"><a href="NativeSymbol.html" title="interface in jdk.incubator.foreign">NativeSymbol</a></span>&nbsp;<span class="element-name">upcallStub</span><wbr><span class="parameters">(<a href="../../../../java.base/java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a>&nbsp;target,
 <a href="FunctionDescriptor.html" title="class in jdk.incubator.foreign">FunctionDescriptor</a>&nbsp;function,
 <a href="ResourceScope.html" title="interface in jdk.incubator.foreign">ResourceScope</a>&nbsp;scope)</span></div>
<div class="block">Allocates a native stub with given scope which can be passed to other foreign functions (as a function pointer);
 calling such a function pointer from native code will result in the execution of the provided method handle.

 <p>
 The returned function pointer is associated with the provided scope. When such scope is closed,
 the corresponding native stub will be deallocated.
 <p>
 The target method handle should not throw any exceptions. If the target method handle does throw an exception,
 the VM will exit with a non-zero exit code. To avoid the VM aborting due to an uncaught exception, clients
 could wrap all code in the target method handle in a try/catch block that catches any <a href="../../../../java.base/java/lang/Throwable.html" title="class in java.lang"><code>Throwable</code></a>, for
 instance by using the <a href="../../../../java.base/java/lang/invoke/MethodHandles.html#catchException(java.lang.invoke.MethodHandle,java.lang.Class,java.lang.invoke.MethodHandle)"><code>MethodHandles.catchException(MethodHandle, Class, MethodHandle)</code></a>
 method handle combinator, and handle exceptions as desired in the corresponding catch block.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>target</code> - the target method handle.</dd>
<dd><code>function</code> - the function descriptor.</dd>
<dd><code>scope</code> - the upcall stub scope.</dd>
<dt>Returns:</dt>
<dd>the native stub symbol.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../java.base/java/lang/IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if the provided descriptor contains either a sequence or a padding layout,
 or if it is determined that the target method handle can throw an exception, or if the target method handle
 has a type that does not match the upcall stub <a href="CLinker.html#upcall-stubs"><em>inferred type</em></a>.</dd>
<dd><code><a href="../../../../java.base/java/lang/IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if <code>scope</code> has been already closed, or if access occurs from a thread other
 than the thread owning <code>scope</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="downcallType(jdk.incubator.foreign.FunctionDescriptor)">
<h3>downcallType</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="../../../../java.base/java/lang/invoke/MethodType.html" title="class in java.lang.invoke">MethodType</a></span>&nbsp;<span class="element-name">downcallType</span><wbr><span class="parameters">(<a href="FunctionDescriptor.html" title="class in jdk.incubator.foreign">FunctionDescriptor</a>&nbsp;functionDescriptor)</span></div>
<div class="block">Obtains the downcall method handle <a href="../../../../java.base/java/lang/invoke/MethodType.html" title="class in java.lang.invoke">type</a> associated with a given function descriptor.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>functionDescriptor</code> - a function descriptor.</dd>
<dt>Returns:</dt>
<dd>the downcall method handle <a href="../../../../java.base/java/lang/invoke/MethodType.html" title="class in java.lang.invoke">type</a> associated with a given function descriptor.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../java.base/java/lang/IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if one or more layouts in the function descriptor are not supported
 (e.g. if they are sequence layouts or padding layouts).</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="upcallType(jdk.incubator.foreign.FunctionDescriptor)">
<h3>upcallType</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="../../../../java.base/java/lang/invoke/MethodType.html" title="class in java.lang.invoke">MethodType</a></span>&nbsp;<span class="element-name">upcallType</span><wbr><span class="parameters">(<a href="FunctionDescriptor.html" title="class in jdk.incubator.foreign">FunctionDescriptor</a>&nbsp;functionDescriptor)</span></div>
<div class="block">Obtains the method handle <a href="../../../../java.base/java/lang/invoke/MethodType.html" title="class in java.lang.invoke">type</a> associated with an upcall stub with given function descriptor.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>functionDescriptor</code> - a function descriptor.</dd>
<dt>Returns:</dt>
<dd>the method handle <a href="../../../../java.base/java/lang/invoke/MethodType.html" title="class in java.lang.invoke">type</a> associated with an upcall stub with given function descriptor.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../java.base/java/lang/IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if one or more layouts in the function descriptor are not supported
 (e.g. if they are sequence layouts or padding layouts).</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><a href="https://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase18&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples. <a href="https://docs.oracle.com/en/java/javase/index.html">Other versions.</a><br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2022, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java18speclicense.html">license terms</a> and the <a href="https://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <!-- Version 18.0.2+9-61 --></small></p>
</footer>
</div>
</div>
</body>
</html>
